---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Sdk from './Sdk.astro';
import '../styles/main.scss';
import '../styles/fluxzero.css';
import Runtime from './Runtime.astro';
import Cloud from './Cloud.astro';
import BringYourOwn from './BringYourOwn.astro';
---

<BaseLayout 
  title="Product | Fluxzero" 
  description="Fluxzero is the fastest way to build scalable, message-driven apps. One unified SDK, zero boilerplate, full observability, and deploy anywhere."
>
  <!-- Bootstrap icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css" slot="head">
  
  <style slot="head">
    .keyword { color: #569cd6; }
    .field { color: #9cdcfe; }
    .method { color: #dcdcaa; }
    .comment { color: #6a9955; }
    .annotation { color: #4fc1ff; }
  </style>

  <!-- Page wrapper for sticky footer -->
  <main class="page-wrapper">
  <div class="bg-dark" style="height: 75px"><Header /></div>


    <section class="container fluxzero-product pt-5 pb-2 mt-3 mt-sm-4 mt-xl-5">
      <!-- Nav tabs -->
      <ul class="nav nav-tabs justify-content-center overflow-auto pb-2 mb-3 mb-lg-4" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link text-nowrap active" id="sdk-tab" data-bs-toggle="tab" data-bs-target="#sdk" type="button" role="tab" aria-controls="sdk" aria-selected="true">
            <i class="bi bi-code-slash fs-lg opacity-60 me-2"></i>
            Fluxzero SDK
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link text-nowrap" id="runtime-tab" data-bs-toggle="tab" data-bs-target="#runtime" type="button" role="tab" aria-controls="runtime" aria-selected="false">
            <i class="bi bi-boxes fs-lg opacity-60 me-2"></i>
            Fluxzero Runtime
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link text-nowrap" id="cloud-tab" data-bs-toggle="tab" data-bs-target="#cloud" type="button" role="tab" aria-controls="cloud" aria-selected="false">
            <i class="bi bi-cloud-check fs-lg opacity-60 me-2"></i>
            Fluxzero Cloud
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link text-nowrap" id="bring-your-own-tab" data-bs-toggle="tab" data-bs-target="#bring-your-own" type="button" role="tab" aria-controls="bring-your-own" aria-selected="false">
            <i class="bi bi-cloud-upload fs-lg opacity-60 me-2"></i>
            Bring-you-own cloud
          </button>
        </li>
      </ul>

      <div class="tab-content bg-secondary rounded-3 p-4 p-lg-5">
        <!-- Fluxzero SDK -->
        <div class="tab-pane fade show active" id="sdk" role="tabpanel" aria-labelledby="sdk-tab">
          <Sdk/>
        </div>

        <!-- Fluxzero Runtime -->
        <div class="tab-pane fade" id="runtime" role="tabpanel" aria-labelledby="runtime-tab">
          <Runtime/>
        </div>

        <!-- Fluxzero Cloud -->
        <div class="tab-pane fade" id="cloud" role="tabpanel" aria-labelledby="cloud-tab">
          <Cloud/>
        </div>

        <!-- Bring-your-own Cloud -->
        <div class="tab-pane fade" id="bring-your-own" role="tabpanel" aria-labelledby="bring-your-own-tab">
          <BringYourOwn/>
        </div>
      </div>
    </section>
  </main>

  <Footer />

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const hash = window.location.hash; // e.g. "#sdk"
      
      // Map hash to tab IDs
      const hashToTabId = {
        '#sdk': '#sdk',
        '#runtime': '#runtime', 
        '#cloud': '#cloud',
        '#bring-your-own': '#bring-your-own'
      };
      
      if (hash && hashToTabId[hash]) {
        const triggerEl = document.querySelector(`button[data-bs-target="${hashToTabId[hash]}"]`);
        if (triggerEl) {
          const tab = new bootstrap.Tab(triggerEl);
          tab.show();
        }
      } else if (hash) {
        const triggerEl = document.querySelector(`button[data-bs-target="${hash}"]`);
        if (triggerEl) {
          const tab = new bootstrap.Tab(triggerEl);
          tab.show();
        }
      }
    });

    document.querySelectorAll('button[data-bs-toggle="tab"]').forEach(button => {
      button.addEventListener('shown.bs.tab', event => {
        const target = event.target.getAttribute("data-bs-target");
        
        const hash = target;
        if (hash && history.replaceState) {
          history.replaceState(null, null, hash);
        }
      });
    });
  </script>

  <script>
    import { Swiper } from 'swiper/bundle';
    import 'swiper/swiper-bundle.css';

    // Initialize Swiper
    document.addEventListener('DOMContentLoaded', function() {
      const swiperEl = document.querySelector('.swiper');
      if (swiperEl) {
        const swiperOptions = JSON.parse(swiperEl.getAttribute('data-swiper-options') || '{}');
        new Swiper(swiperEl, swiperOptions);
      }
    });
  </script>

</BaseLayout>