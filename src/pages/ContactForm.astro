<!-- Contact form -->
<div class="col-xl-6 col-lg-7 offset-xl-2">
    <div class="card border-light shadow-lg py-3 p-sm-4 p-md-5">
        <div class="bg-dark position-absolute top-0 start-0 w-100 h-100 rounded-3 d-none d-dark-mode-block"></div>
        <div class="card-body position-relative zindex-2">
            <h2 class="card-title pb-3 mb-4">Get in touch</h2>
            <form action="https://getform.io/f/bejeorxa" id="contactForm" method="POST" class="row g-4 needs-validation" novalidate>
                <input type="hidden" name="_gotcha" style="display:none !important">
                <div class="col-12">
                    <label for="fn" class="form-label fs-base">Full name</label>
                    <input name="name" type="text" class="form-control form-control-lg" id="fn" required>
                    <div class="invalid-feedback">Please enter your full name!</div>
                </div>
                <div class="col-12">
                    <label for="email" class="form-label fs-base">Email address</label>
                    <input name="email" type="email" class="form-control form-control-lg" id="email" required>
                    <div class="invalid-feedback">Please provide a valid email address!</div>
                </div>
                <div class="col-12">
                    <label for="message" class="form-label fs-base">Message</label>
                    <textarea name="message" type="text" class="form-control form-control-lg" id="message" required></textarea>
                    <div class="invalid-feedback">Please provide a message!</div>
                </div>
                <div class="col-auto ms-auto pt-2 pt-sm-3">
                    <button type="submit" id="submitButton" class="btn btn-lg btn-primary w-100 w-sm-auto">Send</button>
                </div>
            </form>

            <div id="formStatus"></div>

            <script>
                const form = document.getElementById("contactForm");
                const status = document.getElementById("formStatus");
                const submitButton = document.getElementById("submitButton");
                const originalButtonText = submitButton.innerHTML;

                form.addEventListener("submit", async (e) => {
                    e.preventDefault();

                    if (!form.checkValidity()) {
                        form.reportValidity();
                        return;
                    }

                    // Disable button & show spinner
                    submitButton.disabled = true;
                    submitButton.innerHTML = `
      <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      Sending...
    `;

                    const formData = new FormData(form);

                    try {
                        const response = await fetch("https://getform.io/f/bejeorxa", {
                            method: "POST",
                            body: formData,
                        });

                        if (response.ok) {
                            status.textContent = "✅ Thanks, your message was sent!";
                            form.reset();
                            form.classList.remove("was-validated");
                            form.querySelectorAll(".is-invalid, .is-valid").forEach((el) => {
                                el.classList.remove("is-invalid", "is-valid");
                            });
                        } else {
                            status.textContent = "❌ Something went wrong. Please try again.";
                        }
                    } catch (err) {
                        status.textContent = "⚠️ Network error. Please try again later.";
                    } finally {
                        // Re-enable button & restore text
                        submitButton.disabled = false;
                        submitButton.innerHTML = originalButtonText;
                    }
                });
            </script>

        </div>
    </div>
</div>